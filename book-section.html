<html>

<head>
    <script src="elements/typer-area.js"></script>
    <script src="elements/typer-char.js"></script>
    <script src="services/storage-service.js"></script>

    <link rel="stylesheet" href="main.css" />

    <script>

        function init() {
            const params = new URLSearchParams(window.location.search);
            const id = params.get('id');
            const sectionIndex = params.get('section') || 0;
            const chapterIndex = params.get('chapter') || 0 ;

            if (!id)
                window.location = `/`;

            const data = storageService.loadBookData(id);

            const chapter = data.chapters[0];

            if (!chapter)
                window.location = `/`;

            const section = chapter.sections[sectionIndex];


            const frag = document.createDocumentFragment();

            
            const typerArea = document.createElement('typer-area');
            typerArea.setText(section.text);

            frag.appendChild(typerArea);

            document.body.appendChild(frag);
        }

    </script>
</head>

<body onload="init()">
    book

</body>

</html>